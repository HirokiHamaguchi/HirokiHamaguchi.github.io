---
title: "2023-05 月記"
authors: 'Hiroki Hamaguchi'
collection: diary
permalink: /diary/2023-05_%E6%9C%88%E8%A8%98/
excerpt: ''
thumbnail: ""
date: 2023-05-31
---

<div class="content">
    <figure name="e26de56b-5db2-4cab-ab87-575801dbf388"><img src="/diary/assets/n5edb5a300835_aa35c1f81358e34cbf87a2a91d0260bb.png"><figcaption></figcaption></figure><p name="43165bba-3ca0-4087-8876-18153d8d06a3" id="43165bba-3ca0-4087-8876-18153d8d06a3">今月は5月、ということで、東大の文化祭である五月祭がありました。<br><br>楽しかったです。</p><p name="0cbf87ef-8189-4330-b408-53630b6eeb69" id="0cbf87ef-8189-4330-b408-53630b6eeb69">多くの売店があって、美味しいものも沢山食べました。</p><p name="7eea8d22-f78b-4a5e-a0e9-a59e5582599a" id="7eea8d22-f78b-4a5e-a0e9-a59e5582599a">その五月祭、私は学科の友人に拾われて、暗号と計算機に関する展示のお手伝いをしていました。いい思い出になりましたし、友人には感謝です。</p><p name="0bcc6906-a6f1-4374-b5f0-61dcdbb1fb44" id="0bcc6906-a6f1-4374-b5f0-61dcdbb1fb44">ところで、その展示の手伝いの一環として、以下のものを作りました。</p><p name="aa77e9e2-1640-452c-b91c-09c009e32085"><a href="https://twitter.com/hari64boli64/status/1657877713334734849">https://twitter.com/hari64boli64/status/1657877713334734849</a></p><p name="799dddba-fb98-4ff7-94be-061ed84b5556" id="799dddba-fb98-4ff7-94be-061ed84b5556">換字式暗号という暗号の解読ツールです。<br><br>ここではそのちょっとした裏話を書きます。</p><p name="33a965a4-cab9-43c9-9a3d-a42aa33c461f" id="33a965a4-cab9-43c9-9a3d-a42aa33c461f">このアプリの開発は、99%の部分は2日で出来た程度の簡単なものだったのですが、非常に細かい、全体の1%にも満たない部分で、結構罠に嵌りました。その主な罠はSafariの仕様に起因するものだったのですが、もう一つ、少し面白い話があったので記そうと思います。</p><p name="03e0354b-9058-4304-8d34-0b26c02ad6bf" id="03e0354b-9058-4304-8d34-0b26c02ad6bf">このアプリではHTML5のinputタグで、type="date"としているもの(つまり、日付の情報を入力してもらう欄のこと)が含まれています。丁度、以下のような入力欄です。<br><br>これに、五月祭の前夜になって、いきなり変な"()"が入るという謎の現象が発生しました。</p><figure name="9f930f53-805d-4d94-81a8-3f1b579ca345" id="9f930f53-805d-4d94-81a8-3f1b579ca345"><img src="/diary/assets/n5edb5a300835_1683891200013-6POZPy4HPf.png" alt="" width="620" height="87"><figcaption>2023/05/13が正しいのに、謎の()が生まれてしまっている</figcaption></figure><p name="e9f15d96-c9d7-400c-8b46-39aa8fccd837" id="e9f15d96-c9d7-400c-8b46-39aa8fccd837">はて、一体これは何なのだろう? ほんのつい先日までは、こんな括弧は無かったのに。<br><br>スマホやiPadからだと表示されないし、本当に一体なんなんだと頭を抱えました。</p><p name="f38690ed-dbae-4480-8754-e20fe54768d8" id="f38690ed-dbae-4480-8754-e20fe54768d8">まったく原因が分からず、何か変なChromeの仕様変更でも起きたのか? と疑っていましたが、オチを話すと、実は自分のパソコンの設定変更が原因なだけでした。</p><p name="61b11607-db98-474d-960f-c991bc1dbabc" id="61b11607-db98-474d-960f-c991bc1dbabc">というのも、この日の前日に、あるネットの情報から、Windowsのデフォルトの日時表示を曜日付きに変えられる、ということを知り、その設定をいじっていました。</p><figure name="cb3d2a0e-78bb-4790-afd5-c4f8c529bf4e" id="cb3d2a0e-78bb-4790-afd5-c4f8c529bf4e"><img src="/diary/assets/n5edb5a300835_1683891059533-6bo36DQVNL.png" alt="" width="607" height="216"><figcaption>Windowsはデフォルトだと、曜日が表示されません</figcaption></figure><figure name="bb9b18e8-1feb-4f55-a28e-bf887b3b2f0f" id="bb9b18e8-1feb-4f55-a28e-bf887b3b2f0f"><img src="/diary/assets/n5edb5a300835_1683891066914-m9OiPNXz64.png" alt="" width="620" height="349"><figcaption>しかし、写真のように設定を変えると、曜日が出るようになります(右下)</figcaption></figure><p name="432c950c-9ffd-4b29-8328-6f4227ce0f2e" id="432c950c-9ffd-4b29-8328-6f4227ce0f2e">設定当時、これは便利だ！とハッピーな気持ちでいたのですが、なんとこれが今回のバグの原因でした。</p><p name="0ca73649-7ee9-4c8c-900f-c88994de24c8" id="0ca73649-7ee9-4c8c-900f-c88994de24c8">画像にもありますが、この設定は</p><pre name="f574f9ad-871d-48c7-babe-d4f5412e7eaa" id="f574f9ad-871d-48c7-babe-d4f5412e7eaa"><code>yyyy/MM/dd '('ddd')'</code></pre><p name="d6c24a09-aea4-409f-87d3-5da6cedf4ceb" id="d6c24a09-aea4-409f-87d3-5da6cedf4ceb">と、曜日、すなわちdddを、括弧で囲んだものを最後に付け加えています。</p><p name="c90705ef-c675-4970-a83e-b5059668c23d" id="c90705ef-c675-4970-a83e-b5059668c23d">もしきちんと曜日の情報も取得しているならば、これは正常に表示されます。丁度写真にある「5/12(金)」などのように。</p><p name="2aa38103-e947-4b25-9983-3788c218b05c" id="2aa38103-e947-4b25-9983-3788c218b05c">なので無問題と思っていました。</p><p name="1267c1b0-6541-49ec-9b68-b452ffd64f9c" id="1267c1b0-6541-49ec-9b68-b452ffd64f9c">ですが恐らく、今回のHTMLの方では、年月日は情報として取得しているものの、「曜日」の情報を取得していないので、このdddが空白になり、結果として余分な()が出現する、というロジックだったようです。<br><br>なるほど……</p><p name="9d5fef43-71c0-4220-a542-34b7d997c681" id="9d5fef43-71c0-4220-a542-34b7d997c681">まさかこんな形で副作用が出るとは全く思わず、非常に驚きました。</p><p name="71d7491e-3638-4d9e-8add-fedc2e4402b0" id="71d7491e-3638-4d9e-8add-fedc2e4402b0">このような類のバグは、恐らく初めて遭遇したので、嫌な気持ちにはなりつつも、ちょっと面白かったです。</p><p name="c781730c-7a71-4c4d-94fb-779b1980cfd2" id="c781730c-7a71-4c4d-94fb-779b1980cfd2">以上、ちょっとした裏話でした。</p><hr><p name="8955db11-52dc-401d-a8b5-a6bcbf5b5d43" id="8955db11-52dc-401d-a8b5-a6bcbf5b5d43">ところで、何の関係もない話題ですが、今月も倫理の模試の校正バイトを少ししていて、全く仕事と関係ない日にふと気が付いた(それ故にここに書いています)どうでも良いことがあるのですが、集合的無意識は種族のイドラの一例と言えそうです。個人的にはなんだかやけに腑に落ちました。(他の方に伝わるのかは微妙ですが……)</p><p name="d9aa12c6-0d29-441b-ab9d-4eab3e00e31c" id="d9aa12c6-0d29-441b-ab9d-4eab3e00e31c">また、もう一つどうでも良い事として、話題に「のぼる」の漢字が「上る」だと最近になって明示的に気付きました。ところで話題に「上がる（あがる）」は誤用なのでしょうか？　実はよく分かっていません。</p><p name="91cc98ed-0cf1-4338-86ed-ac151d1bfefe" id="91cc98ed-0cf1-4338-86ed-ac151d1bfefe">日本語は楽しいですが、難しいですね。</p><p name="ad56f226-0a40-487a-98fe-5f92aaca72a7" id="ad56f226-0a40-487a-98fe-5f92aaca72a7">最近つくづく、そう思います。</p><hr><p name="1dc92cbd-73e0-4c36-b3a1-f140f269b9b2" id="1dc92cbd-73e0-4c36-b3a1-f140f269b9b2">今月は以上です。</p><p name="d89f4198-be7a-403d-97cf-d3298eeb7ce5" id="d89f4198-be7a-403d-97cf-d3298eeb7ce5">こんなつまらない月記でも、毎月一定数は読んで下さる方がいるそうで、いつも非常に感謝しています。<br>ありがとうございます。</p><p name="d331608d-6ae8-49a8-b5e9-a60ba2ca6531" id="d331608d-6ae8-49a8-b5e9-a60ba2ca6531"><br></p>
</div>
